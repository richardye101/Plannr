Index: app/src/main/java/com/example/plannr/LoginViewFragment.java
IDEA additional info:
Subsystem: com.intellij.openapi.diff.impl.patch.BaseRevisionTextPatchEP
<+>package com.example.plannr;\r\n\r\nimport android.app.ProgressDialog;\r\nimport android.os.Bundle;\r\nimport android.util.Log;\r\nimport android.widget.EditText;\r\nimport android.view.LayoutInflater;\r\nimport android.view.View;\r\nimport android.view.ViewGroup;\r\nimport android.widget.Toast;\r\n\r\nimport androidx.annotation.NonNull;\r\nimport androidx.fragment.app.Fragment;\r\nimport androidx.navigation.fragment.NavHostFragment;\r\n\r\nimport com.example.plannr.databinding.FragmentLoginViewBinding;\r\nimport com.example.plannr.models.Course;\r\nimport com.example.plannr.models.UserModel;\r\nimport com.example.plannr.services.CourseRepository;\r\nimport com.example.plannr.services.DatabaseConnection;\r\nimport com.example.plannr.presenters.LoginPresenter;\r\n\r\nimport com.google.android.gms.tasks.OnCompleteListener;\r\nimport com.google.android.gms.tasks.Task;\r\nimport com.google.firebase.auth.FirebaseAuth;\r\nimport com.google.firebase.auth.FirebaseUser;\r\nimport com.google.firebase.database.DataSnapshot;\r\n\r\nimport java.util.Map;\r\n\r\n/**\r\n * A fragment representing the login view, and handles the operations required.\r\n * This implements the View in MVP\r\n */\r\npublic class LoginViewFragment extends Fragment implements Contract.ILoginView {\r\n\r\n    private FragmentLoginViewBinding binding;\r\n\r\n    EditText inputEmail, inputPassword;\r\n    ProgressDialog progressDialog;\r\n    private FirebaseAuth mAuth;\r\n    private DatabaseConnection db;\r\n    private Contract.ILoginPresenter presenter;\r\n\r\n    public LoginViewFragment() {\r\n        // Required empty public constructor\r\n    }\r\n\r\n    @Override\r\n    public View onCreateView(@NonNull LayoutInflater inflater, ViewGroup container,\r\n                             Bundle savedInstanceState) {\r\n\r\n        binding = FragmentLoginViewBinding.inflate(inflater, container, false);\r\n        return binding.getRoot();\r\n    }\r\n\r\n    @Override\r\n    public void onCreate(Bundle savedInstanceState) {\r\n        super.onCreate(savedInstanceState);\r\n        progressDialog = new ProgressDialog(getActivity());\r\n        mAuth = FirebaseAuth.getInstance();\r\n        db = DatabaseConnection.getInstance();\r\n        UserModel user = new UserModel();\r\n        user.setAuth(mAuth);\r\n        user.setDb(db);\r\n        presenter = new LoginPresenter(LoginViewFragment.this, user);\r\n    }\r\n\r\n    public void onViewCreated(@NonNull View view, Bundle savedInstanceState) {\r\n        super.onViewCreated(view, savedInstanceState);\r\n\r\n        inputEmail = binding.inputEmailAddress;\r\n        inputPassword = binding.inputPassword;\r\n\r\n        binding.loginButton.setOnClickListener(view1 -> {\r\n            String email = getEmail();\r\n            String password = getPassword();\r\n            presenter.handleLogin(email, password);\r\n        });\r\n\r\n        binding.registerButtonLoginPage.setOnClickListener(view1 -> {\r\n            NavHostFragment.findNavController(LoginViewFragment.this)\r\n                    .navigate(R.id.action_loginFragment_to_registerFragment);\r\n        });\r\n    }\r\n\r\n    public String getEmail(){\r\n        String email = inputEmail.getText().toString();\r\n        Log.d(\"entered login email\", email);\r\n        return email;\r\n    }\r\n\r\n    public String getPassword(){\r\n        String password = inputPassword.getText().toString();\r\n        return password;\r\n    }\r\n\r\n    public void setEmailError(){\r\n        inputEmail.setError(\"Invalid Email\");\r\n    }\r\n\r\n    public void setPasswordError(){\r\n        inputPassword.setError(\"Password needs 6 or more characters\");\r\n    }\r\n\r\n    public void showLoadingLogin(){\r\n        progressDialog.setMessage(\"Logging in...\");\r\n        progressDialog.setTitle(\"Login\");\r\n        progressDialog.setCanceledOnTouchOutside(false);\r\n        progressDialog.show();\r\n    }\r\n    public void hideLoadingLogin(){\r\n        progressDialog.dismiss();\r\n    }\r\n\r\n    public void loginSuccess(String name){\r\n//        NavHostFragment.findNavController(LoginViewFragment.this)\r\n//                .navigate(R.id.action_loginFragment_to_FirstFragment);\r\n        getData();\r\n\r\n        Toast.makeText(getActivity(),\r\n                \"Login Successful, welcome \" + name, Toast.LENGTH_SHORT).show();\r\n    }\r\n\r\n    public void loginFailure(){\r\n        Toast.makeText(getActivity(), \"Incorrect Email or Password\", Toast.LENGTH_SHORT).show();\r\n    }\r\n\r\n    public void loginUserNotFound(){\r\n        Toast.makeText(getActivity(), \"User does not exist\", Toast.LENGTH_SHORT).show();\r\n    }\r\n\r\n    public void getData() {\r\n        db.ref.child(\"offerings\").get().addOnCompleteListener(new OnCompleteListener<DataSnapshot>() {\r\n            @Override\r\n            public void onComplete(@NonNull Task<DataSnapshot> task) {\r\n                if (!task.isSuccessful()) {\r\n                    Log.e(\"firebase\", \"Error getting data\", task.getException());\r\n                }\r\n                else {\r\n                    Log.d(\"firebase\", String.valueOf(task.getResult().getValue()));\r\n                    commitData((Map<String, Object>) task.getResult().getValue());\r\n\r\n                    Toast.makeText(getActivity(),\r\n                            \"Database query successful\", Toast.LENGTH_SHORT).show();\r\n\r\n                    NavHostFragment.findNavController(LoginViewFragment.this)\r\n                            .navigate(R.id.action_loginFragment_to_DisplayCoursesFragment);\r\n                }\r\n            }\r\n        });\r\n    }\r\n\r\n    public void commitData(Map<String, Object> courses) {\r\n        CourseRepository repository = CourseRepository.getInstance();\r\n\r\n        for(Map.Entry<String, Object> entry : courses.entrySet()) {\r\n            String name = ((Map) entry.getValue()).get(\"courseName\").toString();\r\n            String code = ((Map) entry.getValue()).get(\"courseCode\").toString();\r\n            String[] prerequisites = ((Map) entry.getValue()).get(\"prerequisites\").toString().split(\";\");\r\n            boolean fall = ((Map) entry.getValue()).get(\"fallAvailability\").equals(\"true\");\r\n            boolean summer = ((Map) entry.getValue()).get(\"summerAvailability\").equals(\"true\");\r\n            boolean winter = ((Map) entry.getValue()).get(\"winterAvailability\").equals(\"true\");\r\n            String id = entry.getKey();\r\n\r\n            Course temp = new Course(name, code, prerequisites, fall, summer, winter, id);\r\n            System.out.println(temp.getName() + \", \" + temp.getCode() + \", \" + temp.getFallAvailablility());\r\n\r\n            repository.addCourse(temp);\r\n        }\r\n    }\r\n}
Subsystem: com.intellij.openapi.diff.impl.patch.CharsetEP
<+>UTF-8
===================================================================
diff --git a/app/src/main/java/com/example/plannr/LoginViewFragment.java b/app/src/main/java/com/example/plannr/LoginViewFragment.java
--- a/app/src/main/java/com/example/plannr/LoginViewFragment.java	(revision 75253e7507a684bb575d22f90f930da30055e5ab)
+++ b/app/src/main/java/com/example/plannr/LoginViewFragment.java	(date 1669919743754)
@@ -23,7 +23,6 @@
 import com.google.android.gms.tasks.OnCompleteListener;
 import com.google.android.gms.tasks.Task;
 import com.google.firebase.auth.FirebaseAuth;
-import com.google.firebase.auth.FirebaseUser;
 import com.google.firebase.database.DataSnapshot;
 
 import java.util.Map;
@@ -164,7 +163,6 @@
             String id = entry.getKey();
 
             Course temp = new Course(name, code, prerequisites, fall, summer, winter, id);
-            System.out.println(temp.getName() + ", " + temp.getCode() + ", " + temp.getFallAvailablility());
 
             repository.addCourse(temp);
         }
Index: app/src/main/java/com/example/plannr/models/Course.java
IDEA additional info:
Subsystem: com.intellij.openapi.diff.impl.patch.BaseRevisionTextPatchEP
<+>package com.example.plannr.models;\r\n\r\n/**\r\n * This class stores basic information about a course\r\n */\r\n\r\npublic class Course {\r\n    private String name;\r\n    private String code;\r\n    private String[] prerequisites;\r\n    private boolean fall;\r\n    private boolean summer;\r\n    private boolean winter;\r\n    private String id;\r\n\r\n    public Course(String name, String code, String[] prerequisites, boolean fall, boolean summer,\r\n                  boolean winter, String id) {\r\n        this.name = name;\r\n        this.code = code;\r\n        this.prerequisites = prerequisites;\r\n        this.fall = fall;\r\n        this.summer = summer;\r\n        this.winter = winter;\r\n        this.id = id;\r\n    }\r\n\r\n    public String getName() {\r\n        return name;\r\n    }\r\n\r\n    public String getCode() {\r\n        return code;\r\n    }\r\n\r\n    public String[] getPrerequisites() {\r\n        return prerequisites;\r\n    }\r\n\r\n    public boolean getFallAvailablility() {\r\n        return fall;\r\n    }\r\n\r\n    public boolean getSummerAvailablility() {\r\n        return summer;\r\n    }\r\n\r\n    public boolean getWinterAvailablility() {\r\n        return winter;\r\n    }\r\n\r\n    public String getId() { return id; }\r\n\r\n    @Override\r\n    public boolean equals(Object o) {\r\n        if(! (o instanceof Course))\r\n            return false;\r\n        if(this.id.equals(((Course) o).getId()))\r\n            return true;\r\n        return false;\r\n    }\r\n\r\n    @Override\r\n    public int hashCode() {\r\n        return this.code.hashCode();\r\n    }\r\n}\r\n
Subsystem: com.intellij.openapi.diff.impl.patch.CharsetEP
<+>UTF-8
===================================================================
diff --git a/app/src/main/java/com/example/plannr/models/Course.java b/app/src/main/java/com/example/plannr/models/Course.java
--- a/app/src/main/java/com/example/plannr/models/Course.java	(revision 75253e7507a684bb575d22f90f930da30055e5ab)
+++ b/app/src/main/java/com/example/plannr/models/Course.java	(date 1669919743768)
@@ -36,15 +36,15 @@
         return prerequisites;
     }
 
-    public boolean getFallAvailablility() {
+    public boolean getFallAvailability() {
         return fall;
     }
 
-    public boolean getSummerAvailablility() {
+    public boolean getSummerAvailability() {
         return summer;
     }
 
-    public boolean getWinterAvailablility() {
+    public boolean getWinterAvailability() {
         return winter;
     }
 
Index: app/src/main/java/com/example/plannr/DisplayCoursesFragment.java
IDEA additional info:
Subsystem: com.intellij.openapi.diff.impl.patch.BaseRevisionTextPatchEP
<+>package com.example.plannr;\r\n\r\nimport android.annotation.SuppressLint;\r\nimport android.graphics.Color;\r\nimport android.graphics.drawable.Drawable;\r\nimport android.os.Bundle;\r\nimport android.view.Gravity;\r\nimport android.view.LayoutInflater;\r\nimport android.view.MotionEvent;\r\nimport android.view.View;\r\nimport android.view.ViewGroup;\r\nimport android.widget.Button;\r\nimport android.widget.ImageView;\r\nimport android.widget.LinearLayout;\r\nimport android.widget.RelativeLayout;\r\nimport android.widget.ScrollView;\r\nimport android.widget.TextView;\r\n\r\nimport androidx.core.content.ContextCompat;\r\nimport androidx.fragment.app.Fragment;\r\n\r\nimport com.example.plannr.databinding.FragmentDisplayCoursesBinding;\r\nimport com.example.plannr.models.Course;\r\nimport com.example.plannr.services.CourseRepository;\r\n\r\nimport org.w3c.dom.Text;\r\n\r\nimport java.util.Map;\r\n\r\npublic class DisplayCoursesFragment extends Fragment {\r\n    private FragmentDisplayCoursesBinding binding;\r\n    private long pressStartTime;\r\n    private float pressedX;\r\n    private float pressedY;\r\n    private static final int MAX_CLICK_DURATION = 1000;\r\n    private static final int MAX_CLICK_DISTANCE = 15;\r\n\r\n    @SuppressLint(\"ClickableViewAccessibility\")\r\n    @Override\r\n    public View onCreateView(LayoutInflater inflater, ViewGroup container,\r\n                             Bundle savedInstanceState) {\r\n\r\n        View myView = inflater.inflate(R.layout.fragment_display_courses,\r\n                container, false);\r\n        binding = FragmentDisplayCoursesBinding.inflate(inflater, container, false);\r\n\r\n        LinearLayout.LayoutParams layoutParams = new LinearLayout.LayoutParams(\r\n                LinearLayout.LayoutParams.MATCH_PARENT,\r\n                LinearLayout.LayoutParams.WRAP_CONTENT,\r\n                100.0f);\r\n\r\n        LinearLayout page = new LinearLayout((getContext()));\r\n        page.setOrientation(LinearLayout.VERTICAL);\r\n        //page.setBackgroundColor(getResources().getColor(android.R.color.black));\r\n        ScrollView scroll = new ScrollView(getContext());\r\n        //scroll.setBackgroundColor(getResources().getColor(android.R.color.holo_blue_bright));\r\n\r\n        scroll.addView(page, layoutParams);\r\n        binding.getRoot().addView(scroll, layoutParams);\r\n\r\n        Course[] courses = getData();\r\n\r\n        for(Course course : courses) {\r\n            final String name = course.getName();\r\n            final String code = course.getCode();\r\n\r\n            LinearLayout child = new LinearLayout(getContext());\r\n\r\n            LinearLayout.LayoutParams params = new LinearLayout.LayoutParams(\r\n                    LinearLayout.LayoutParams.MATCH_PARENT,\r\n                    LinearLayout.LayoutParams.WRAP_CONTENT);\r\n            params.setMargins(10, 10, 10, 10);\r\n\r\n            child.setBackground(ContextCompat.getDrawable(getContext(), R.drawable.course_layout_border));\r\n            child.setOrientation(LinearLayout.VERTICAL);\r\n            child.setPadding(10, 10, 10, 10);\r\n            child.setGravity(Gravity.TOP);\r\n\r\n            page.addView(child, params);\r\n\r\n            System.out.println(name + \", \" + code);\r\n\r\n            child.addView(createText(name, 20));\r\n            child.addView(createText(code, 15));\r\n\r\n            child.setOnTouchListener(new View.OnTouchListener() {\r\n                @Override\r\n                public boolean onTouch(View view, MotionEvent event) {\r\n                    switch (event.getAction()) {\r\n                        case MotionEvent.ACTION_DOWN:\r\n                            child.setBackground(ContextCompat.getDrawable(getContext(), R.drawable.course_layout_clicked));\r\n                            child.setPadding(10, 10, 10, 10);\r\n\r\n                            pressStartTime = System.currentTimeMillis();\r\n                            pressedX = event.getX();\r\n                            pressedY = event.getY();\r\n                            break;\r\n                        case MotionEvent.ACTION_UP:\r\n                            child.setBackground(ContextCompat.getDrawable(getContext(), R.drawable.course_layout_border));\r\n                            child.setPadding(10, 10, 10, 10);\r\n\r\n                            long pressDuration = System.currentTimeMillis() - pressStartTime;\r\n                            if(pressDuration < MAX_CLICK_DURATION && distance(pressedX, pressedY,\r\n                                    event.getX(), event.getY()) < MAX_CLICK_DISTANCE)\r\n                                System.out.println(name);\r\n                            break;\r\n                    }\r\n                    return true;\r\n                }\r\n            });\r\n        }\r\n\r\n        return binding.getRoot();\r\n    }\r\n\r\n    private Course[] getData() {\r\n        Course[] courses = new Course[CourseRepository.getCourses().size()];\r\n\r\n        for(int i = 0; i< CourseRepository.getCourses().size(); i++) {\r\n            courses[i] = CourseRepository.getCourses().get(i);\r\n        }\r\n        return courses;\r\n    }\r\n\r\n    private TextView createText(String text, int fontSize) {\r\n        TextView textView = new TextView(getContext());\r\n        textView.setText(text);\r\n        textView.setTextSize(fontSize);\r\n        textView.setTextAlignment(View.TEXT_ALIGNMENT_CENTER);\r\n\r\n        return textView;\r\n    }\r\n\r\n    private float distance(float x1, float y1, float x2, float y2) {\r\n        float dx = x1 - x2;\r\n        float dy = y1 - y2;\r\n        float distanceInPx = (float) Math.sqrt(dx * dx + dy * dy);\r\n        return pxToDp(distanceInPx);\r\n    }\r\n\r\n    private float pxToDp(float px) {\r\n        return px / getResources().getDisplayMetrics().density;\r\n    }\r\n}
Subsystem: com.intellij.openapi.diff.impl.patch.CharsetEP
<+>UTF-8
===================================================================
diff --git a/app/src/main/java/com/example/plannr/DisplayCoursesFragment.java b/app/src/main/java/com/example/plannr/DisplayCoursesFragment.java
--- a/app/src/main/java/com/example/plannr/DisplayCoursesFragment.java	(revision 75253e7507a684bb575d22f90f930da30055e5ab)
+++ b/app/src/main/java/com/example/plannr/DisplayCoursesFragment.java	(date 1669919743762)
@@ -78,8 +78,6 @@
 
             page.addView(child, params);
 
-            System.out.println(name + ", " + code);
-
             child.addView(createText(name, 20));
             child.addView(createText(code, 15));
 
@@ -88,7 +86,8 @@
                 public boolean onTouch(View view, MotionEvent event) {
                     switch (event.getAction()) {
                         case MotionEvent.ACTION_DOWN:
-                            child.setBackground(ContextCompat.getDrawable(getContext(), R.drawable.course_layout_clicked));
+                            child.setBackground(ContextCompat.getDrawable(
+                                    getContext(), R.drawable.course_layout_clicked));
                             child.setPadding(10, 10, 10, 10);
 
                             pressStartTime = System.currentTimeMillis();
@@ -96,7 +95,8 @@
                             pressedY = event.getY();
                             break;
                         case MotionEvent.ACTION_UP:
-                            child.setBackground(ContextCompat.getDrawable(getContext(), R.drawable.course_layout_border));
+                            child.setBackground(ContextCompat.getDrawable(
+                                    getContext(), R.drawable.course_layout_border));
                             child.setPadding(10, 10, 10, 10);
 
                             long pressDuration = System.currentTimeMillis() - pressStartTime;
Index: app/src/main/java/com/example/plannr/CoursesActionSelectFragment.java
IDEA additional info:
Subsystem: com.intellij.openapi.diff.impl.patch.BaseRevisionTextPatchEP
<+>package com.example.plannr;\r\n\r\nimport android.os.Bundle;\r\nimport android.util.Log;\r\nimport android.view.LayoutInflater;\r\nimport android.view.View;\r\nimport android.view.ViewGroup;\r\nimport android.widget.Toast;\r\n\r\nimport androidx.annotation.NonNull;\r\nimport androidx.fragment.app.Fragment;\r\nimport androidx.navigation.fragment.NavHostFragment;\r\n\r\nimport com.example.plannr.databinding.FragmentViewCoursesBinding;\r\nimport com.example.plannr.models.Course;\r\nimport com.example.plannr.services.CourseRepository;\r\nimport com.example.plannr.services.DatabaseConnection;\r\nimport com.google.android.gms.tasks.OnCompleteListener;\r\nimport com.google.android.gms.tasks.Task;\r\nimport com.google.firebase.database.DataSnapshot;\r\n\r\nimport java.util.Map;\r\n\r\n/**\r\n * This fragment shows buttons that allow the user to choose an action regarding courses\r\n * On \"view courses\" button click, data is queried from firebase and the user is sent to\r\n * another fragment\r\n * Queried courses are stored as arrayList of Course objects in CourseRepository\r\n */\r\n\r\npublic class CoursesActionSelectFragment extends Fragment {\r\n\r\n    private FragmentViewCoursesBinding binding;\r\n    private DatabaseConnection db;\r\n    private Map<String, Object> courses;\r\n\r\n    @Override\r\n    public View onCreateView(LayoutInflater inflater, ViewGroup container,\r\n                             Bundle savedInstanceState) {\r\n        // Inflate the layout for this fragment\r\n//        return inflater.inflate(R.layout.fragment_login, container, false);\r\n        binding = FragmentViewCoursesBinding.inflate(inflater, container, false);\r\n        return binding.getRoot();\r\n    }\r\n\r\n    @Override\r\n    public void onCreate(Bundle savedInstanceState) {\r\n        super.onCreate(savedInstanceState);\r\n\r\n        db = DatabaseConnection.getInstance();\r\n    }\r\n\r\n    public void onViewCreated(@NonNull View view, Bundle savedInstanceState) {\r\n        super.onViewCreated(view, savedInstanceState);\r\n\r\n        binding.viewCourses.setOnClickListener(new View.OnClickListener() {\r\n            @Override\r\n            public void onClick(View view) {\r\n                getData();\r\n            }\r\n        });\r\n    }\r\n\r\n    public void getData() {\r\n        db.ref.child(\"offerings\").get().addOnCompleteListener(new OnCompleteListener<DataSnapshot>() {\r\n            @Override\r\n            public void onComplete(@NonNull Task<DataSnapshot> task) {\r\n                if (!task.isSuccessful()) {\r\n                    Log.e(\"firebase\", \"Error getting data\", task.getException());\r\n                    courses = null;\r\n                    binding.textView2.setText(courses.get(\"cscb07\").toString());\r\n                }\r\n                else {\r\n                    Log.d(\"firebase\", String.valueOf(task.getResult().getValue()));\r\n                    courses = (Map<String, Object>) task.getResult().getValue();\r\n\r\n                    commitData();\r\n\r\n                    Toast.makeText(getActivity(),\r\n                            \"Database query successful\", Toast.LENGTH_SHORT).show();\r\n\r\n                    NavHostFragment.findNavController(CoursesActionSelectFragment.this)\r\n                            .navigate(R.id.action_loginFragment_to_DisplayCoursesFragment);\r\n                }\r\n            }\r\n        });\r\n    }\r\n\r\n    public void commitData() {\r\n        CourseRepository repository = CourseRepository.getInstance();\r\n\r\n        for(Map.Entry<String, Object> entry : courses.entrySet()) {\r\n            String name = ((Map) entry.getValue()).get(\"courseName\").toString();\r\n            String code = ((Map) entry.getValue()).get(\"courseCode\").toString();\r\n            String[] prerequisites = ((Map) entry.getValue()).get(\"prerequisites\").toString().split(\";\");\r\n            boolean fall = ((Map) entry.getValue()).get(\"fallAvailability\").equals(\"true\");\r\n            boolean summer = ((Map) entry.getValue()).get(\"summerAvailability\").equals(\"true\");\r\n            boolean winter = ((Map) entry.getValue()).get(\"winterAvailability\").equals(\"true\");\r\n            String id = entry.getKey();\r\n\r\n            Course temp = new Course(name, code, prerequisites, fall, summer, winter, id);\r\n            System.out.println(temp.getName() + \", \" + temp.getCode() + \", \" + temp.getFallAvailablility());\r\n\r\n            repository.addCourse(temp);\r\n        }\r\n    }\r\n}\r\n
Subsystem: com.intellij.openapi.diff.impl.patch.CharsetEP
<+>UTF-8
===================================================================
diff --git a/app/src/main/java/com/example/plannr/CoursesActionSelectFragment.java b/app/src/main/java/com/example/plannr/CoursesActionSelectFragment.java
--- a/app/src/main/java/com/example/plannr/CoursesActionSelectFragment.java	(revision 75253e7507a684bb575d22f90f930da30055e5ab)
+++ b/app/src/main/java/com/example/plannr/CoursesActionSelectFragment.java	(date 1669919743743)
@@ -99,7 +99,7 @@
             String id = entry.getKey();
 
             Course temp = new Course(name, code, prerequisites, fall, summer, winter, id);
-            System.out.println(temp.getName() + ", " + temp.getCode() + ", " + temp.getFallAvailablility());
+            System.out.println(temp.getName() + ", " + temp.getCode() + ", " + temp.getFallAvailability());
 
             repository.addCourse(temp);
         }
